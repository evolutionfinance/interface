<!--<nz-row>-->
<!--    <nz-card nz-col [nzSpan]="8" nzTitle="Stable vs Variable APR">-->
<!--        <x-chartist [type]="type"-->
<!--                    [data]="chartsData.stableVariable"-->
<!--                    [options]="options">-->
<!--        </x-chartist>-->
<!--    </nz-card>-->
<!--    <nz-card nz-col [nzSpan]="8" nzTitle="Deposit APY">-->
<!--        <x-chartist [type]="type"-->
<!--                    [data]="chartsData.deposits-list"-->
<!--                    [options]="options">-->
<!--        </x-chartist>-->
<!--    </nz-card>-->
<!--    <nz-card nz-col [nzSpan]="8" nzTitle="Utilization rate">-->
<!--        <x-chartist [type]="type"-->
<!--                    [data]="chartsData.utilization"-->
<!--                    [options]="options">-->
<!--        </x-chartist>-->
<!--    </nz-card>-->

<!--</nz-row>-->
<div class="wrapper">
    <div class="charts">
        <div class="charts-item borrow desktop-only">
            <div class="charts-item-name borrow-chart-titles">
                <span>
                    Borrow Rate
                </span>
                <span class="variable">
                    <span class="circle"></span>
                    <span>Variable</span>
                </span>
            </div>
            <x-chartist [type]="type"
                        [data]="chartsData.borrow"
                        [options]="lineChartOptions">
            </x-chartist>
        </div>
        <div class="charts-item deposit desktop-only">
            <div class="charts-item-name">
                Deposit Rate
            </div>
            <x-chartist [type]="type"
                        [data]="chartsData.deposit"
                        [options]="lineChartOptions">
            </x-chartist>
        </div>
        <div class="charts-item utilization desktop-only">
            <div class="charts-item-name">
                Utilisation Rate
            </div>
            <x-chartist [type]="type"
                        [data]="chartsData.utilization"
                        [options]="lineChartOptions">
            </x-chartist>
        </div>
        <div class="mobile-only mobile-charts-container">
            <nz-collapse>
                <nz-collapse-panel
                        [nzHeader]="'Borrow Rate'"
                        [nzExtra]="extraTpl"
                        [nzShowArrow]="false"
                >
                    <div class="charts-item borrow">
                        <x-chartist [type]="type"
                                    [data]="chartsData.borrow"
                                    [options]="lineChartOptions">
                        </x-chartist>
                    </div>
                </nz-collapse-panel>
            </nz-collapse>
            <ng-template #extraTpl>
                <svg width="18" height="18" viewBox="0 0 18 18" class="collapse-icon">
                    <path d="M9 0C7.21997 0 5.47991 0.527841 3.99987 1.51677C2.51983 2.50571 1.36628 3.91131 0.685088 5.55585C0.00389956 7.20038 -0.17433 9.00998 0.172937 10.7558C0.520203 12.5016 1.37737 14.1053 2.63604 15.364C3.89472 16.6226 5.49836 17.4798 7.24419 17.8271C8.99002 18.1743 10.7996 17.9961 12.4442 17.3149C14.0887 16.6337 15.4943 15.4802 16.4832 14.0001C17.4722 12.5201 18 10.78 18 9C18 7.8181 17.7672 6.64778 17.3149 5.55585C16.8626 4.46392 16.1997 3.47177 15.364 2.63604C14.5282 1.80031 13.5361 1.13738 12.4442 0.685084C11.3522 0.232792 10.1819 0 9 0ZM9 16.65C7.48698 16.65 6.00793 16.2013 4.74989 15.3607C3.49186 14.5201 2.51134 13.3254 1.93233 11.9275C1.35332 10.5297 1.20182 8.99151 1.497 7.50756C1.79217 6.0236 2.52077 4.6605 3.59064 3.59063C4.66051 2.52076 6.02361 1.79217 7.50756 1.49699C8.99152 1.20182 10.5297 1.35331 11.9275 1.93232C13.3254 2.51133 14.5202 3.49185 15.3607 4.74989C16.2013 6.00792 16.65 7.48697 16.65 9C16.65 11.0289 15.844 12.9747 14.4094 14.4094C12.9747 15.844 11.0289 16.65 9 16.65Z"/>
                    <path d="M12.3749 8.32031H9.67495V5.62031C9.67495 5.44129 9.60383 5.2696 9.47725 5.14302C9.35066 5.01643 9.17897 4.94531 8.99995 4.94531C8.82093 4.94531 8.64924 5.01643 8.52265 5.14302C8.39607 5.2696 8.32495 5.44129 8.32495 5.62031V8.32031H5.62495C5.44593 8.32031 5.27424 8.39143 5.14765 8.51802C5.02107 8.6446 4.94995 8.81629 4.94995 8.99531C4.94995 9.17433 5.02107 9.34602 5.14765 9.47261C5.27424 9.5992 5.44593 9.67031 5.62495 9.67031H8.32495V12.3703C8.32495 12.5493 8.39607 12.721 8.52265 12.8476C8.64924 12.9742 8.82093 13.0453 8.99995 13.0453C9.17897 13.0453 9.35066 12.9742 9.47725 12.8476C9.60383 12.721 9.67495 12.5493 9.67495 12.3703V9.67031H12.3749C12.554 9.67031 12.7257 9.5992 12.8522 9.47261C12.9788 9.34602 13.0499 9.17433 13.0499 8.99531C13.0499 8.81629 12.9788 8.6446 12.8522 8.51802C12.7257 8.39143 12.554 8.32031 12.3749 8.32031Z"/>
                </svg>
            </ng-template>
            <nz-collapse>
                <nz-collapse-panel
                        [nzHeader]="'Deposit Rate'"
                        [nzExtra]="extraTpl"
                        [nzShowArrow]="false"
                >
                    <div class="charts-item deposit">
                        <x-chartist [type]="type"
                                    [data]="chartsData.deposit"
                                    [options]="lineChartOptions">
                        </x-chartist>
                    </div>
                </nz-collapse-panel>
            </nz-collapse>
            <nz-collapse>
                <nz-collapse-panel
                        [nzHeader]="'Utilisation Rate'"
                        [nzExtra]="extraTpl"
                        [nzShowArrow]="false"
                >
                    <div class="charts-item utilization">
                        <x-chartist [type]="type"
                                    [data]="chartsData.utilization"
                                    [options]="lineChartOptions">
                        </x-chartist>
                    </div>
                </nz-collapse-panel>
            </nz-collapse>
        </div>
    </div>
    <div class="row" *ngIf="reserve">
        <div class="col main">
            <nz-card [nzBordered]="false" nzTitle="Reserve Status & Configuration">
                <div class="rates mobile-only">
                    <div class="col">
                        <div class="rates-item">
                            <div class="key">Reserve size</div>
                            <div class="value"><b>$ {{reserve?.totalLiquidity | bigNum: reserve.decimals | fNumber}}</b>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <div class="rates-item">
                            <div class="key">Utilization rate</div>
                            <div class="value"><b>{{reserve?.utilizationRate | percent}}</b></div>
                        </div>
                    </div>
                </div>
                <div class="chart-data">
                    <div class="chart-data-info">
                        <div class="chart-data-title">Available Liquidity</div>
                        <b class="chart-data-amount">{{reserve?.availableLiquidity | bigNum: reserve?.decimals  | fNumber}}</b>
                        <div class="chart-data-usd">
                            ${{util.getReserveFieldAsUsdString(reserve, 'availableLiquidity') | fNumber}}</div>
                    </div>
                    <div class="pie-chart-holder">
                        <x-chartist type="Pie"
                                    [data]="chartsData.pie"
                                    [options]="pieChartOptions">
                        </x-chartist>
                        <img class="asset-icon" [src]="reserve?.assetPictureUrl" [alt]="reserve?.symbol">
                    </div>
                    <div class="chart-data-info">
                        <div class="chart-data-title borrow">Total Borrowed</div>
                        <b class="chart-data-amount">{{util.getBigSum(reserve.totalScaledVariableDebt, reserve.totalPrincipalStableDebt) | bigNum: reserve?.decimals  | fNumber}}</b>
                        <div class="chart-data-usd">${{util.getBorrowTotalInUsd(reserve) | fNumber}}</div>
                    </div>
                </div>
                <div class="rates">
                    <div class="col">
                        <div class="rates-item desktop-only">
                            <div class="key">Reserve size</div>
                            <div class="value"><b>$ {{reserve?.totalLiquidity | bigNum: reserve.decimals | fNumber}}</b>
                            </div>
                        </div>
                        <div class="rates-item-with-header deposit">
                            <div class="rates-item-header">
                                Deposit
                            </div>
                            <div class="rates-item-body">
                                <div class="key">Deposit rate</div>
                                <div class="value"><b>{{reserve.liquidityRate | bigNum: 25}}%</b></div>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <div class="rates-item desktop-only">
                            <div class="key">Utilization rate</div>
                            <div class="value"><b>{{reserve?.utilizationRate | percent}}</b></div>
                        </div>
                        <div class="rates-item-with-header borrow">
                            <div class="rates-item-header">
                                Variable borrowing
                            </div>
                            <div class="rates-item-body">
                                <div class="key">Borrow rate</div>
                                <div class="value"><b>{{reserve.variableBorrowRate | bigNum: 25}}%</b></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="additional-info">
                    <div class="col">
                        <div class="key">Maximum LTV
                            <app-tooltip-info [data]="INFO.MAXIMUM_LTV"></app-tooltip-info>
                        </div>
                        <div class="value"><b>{{reserve?.baseLTVasCollateral | bigNum: 4 | percent}}</b></div>
                    </div>
                    <div class="col">
                        <div class="key">Liquidation threshold
                            <app-tooltip-info [data]="INFO.LIQUIDATION_THRESHOLD"></app-tooltip-info>
                        </div>
                        <div class="value"><b>{{reserve?.reserveLiquidationThreshold | bigNum: 4 | percent}}</b></div>
                    </div>
                    <div class="col">
                        <div class="key">Liquidation penalty
                            <app-tooltip-info [data]="INFO.LIQUIDATION_PENALTY"></app-tooltip-info>
                        </div>
                        <div class="value"><b>{{util.getLiquidationPenalty(reserve) | bigNum: 4 | percent}}</b></div>
                    </div>
                    <div class="col">
                        <div class="key">Used as collateral</div>
                        <div class="value">
                            <b class="green" *ngIf="reserve.usageAsCollateralEnabled">
                                Yes
                            </b>
                            <b class="brown" *ngIf="!reserve.usageAsCollateralEnabled">
                                No
                            </b>
                        </div>
                    </div>
                    <div class="col">
                        <div class="key">Stable borrowing</div>
                        <div class="value">
                            <b class="green" *ngIf="reserve.stableBorrowRateEnabled">
                                Yes
                            </b>
                            <b class="brown" *ngIf="!reserve.stableBorrowRateEnabled">
                                No
                            </b>
                        </div>
                    </div>

                </div>

            </nz-card>
        </div>
        <div class="col secondary stats desktop-only">
            <nz-card [nzBordered]="false" nzTitle="Your information">
                <app-wallet-not-connected *ngIf="!(user$ | async)"
                                          [subTitle]="'We couldn’t detect a wallet. Please connect a wallet to view your personal information here.'">
                </app-wallet-not-connected>
                <ng-container *ngIf="(user$ | async)">
                    <div class="sub-title">
                        Amount Borrowed
                    </div>
                    <div class="flex-row">
                        <div class="key">Borrowed</div>
                        <div class="value">
                            <b>{{userReserve?.scaledVariableDebt | bigNum: reserve.decimals}}</b> {{reserve.symbol}}
                        </div>
                    </div>
                    <div class="flex-row">
                        <div class="key">Health factor
                            <app-tooltip-info [data]="INFO.HEALTH_FACTOR"></app-tooltip-info>
                        </div>
                        <div class="value"><b class="green">{{healthFactor | number: '1.0-2'}}</b></div>
                    </div>
                    <div class="flex-row">
                        <div class="key">Loan to value</div>
                        <div class="value"><b>{{reserve?.baseLTVasCollateral | bigNum: 4 | percent}}</b></div>
                    </div>
                    <div class="flex-row">
                        <div class="key">Available to you</div>
                        <div class="value"><b>{{availableToYou | number: '1.2'}}</b> {{reserve.symbol}}</div>
                    </div>
                    <div class="flex-row">
                        <button class="evl-btn red" [disabled]="!(+availableToYou)" (click)="navigateToBorrow()">
                            Borrow
                        </button>
                        <button class="evl-btn outline" [disabled]="userReserve?.scaledVariableDebt === '0'"
                                (click)="navigateToRepay()">
                            Repay
                        </button>
                    </div>
                    <div class="sub-title">
                        Deposits
                    </div>
                    <div class="flex-row">
                        <div class="key">Your-wallet balance</div>
                        <div class="value">
                            <b>{{userBalance | bigNum: reserve.decimals}}</b>
                            {{reserve.symbol}}
                        </div>
                    </div>
                    <div class="flex-row">
                        <div class="key">You already deposited</div>
                        <div class="value">
                            <b>{{userReserve?.scaledATokenBalance | bigNum: reserve.decimals}}</b> {{reserve.symbol}}
                        </div>
                    </div>
                    <div class="flex-row">
                        <div class="key">Use as collateral
                            <app-tooltip-info [data]="INFO.COLLATERAL"></app-tooltip-info>
                        </div>
                        <div class="value">
                            <nz-switch *ngIf="userReserve"
                                       [(ngModel)]="userReserve.usageAsCollateralEnabledOnUser"
                                       (ngModelChange)="navigateToCollateralSwitch()"></nz-switch>
                        </div>
                    </div>
                    <div class="flex-row no-margin">
                        <button (click)="navigateToDeposit()" class="evl-btn red">
                            Deposit
                        </button>
                        <button [disabled]="!(+this.userReserve?.scaledATokenBalance) " class="evl-btn outline"
                                (click)="navigateToWithdraw()">
                            Withdraw
                        </button>
                    </div>
                </ng-container>

            </nz-card>
        </div>
    </div>
</div>
